@class NSDictionary, NSURLRequest, NSURLSession, NSMutableURLRequest, GTMSessionUploadFetcher, NSMutableData, NSURLCredential, NSError, NSString, NSTimer, NSArray, NSMutableDictionary, NSURLSessionTask, NSObject, NSData, NSOperationQueue, NSURLResponse, NSURLSessionConfiguration, NSURL, NSDate, NSHTTPCookieStorage;
@protocol OS_dispatch_group, GTMSessionFetcherServiceProtocol, GTMFetcherAuthorizationProtocol, OS_dispatch_queue;

@interface GTMSessionFetcher : NSObject <NSURLSessionDelegate> {
    NSMutableURLRequest *_request;
    BOOL _useUploadTask;
    NSURL *_bodyFileURL;
    id /* block */ _bodyStreamProvider;
    NSURLSession *_session;
    BOOL _shouldInvalidateSession;
    NSURLSession *_sessionNeedingInvalidation;
    NSURLResponse *_response;
    NSString *_sessionIdentifier;
    BOOL _didCreateSessionIdentifier;
    NSString *_sessionIdentifierUUID;
    BOOL _userRequestedBackgroundSession;
    NSMutableData *_downloadedData;
    NSError *_downloadFinishedError;
    NSData *_downloadTaskErrorData;
    NSURL *_destinationFileURL;
    long long _downloadedLength;
    BOOL _isStopNotificationNeeded;
    BOOL _isUsingTestBlock;
    id _userData;
    NSMutableDictionary *_properties;
    NSObject<OS_dispatch_group> *_callbackGroup;
    NSOperationQueue *_delegateQueue;
    id<GTMFetcherAuthorizationProtocol> _authorizer;
    long long _servicePriority;
    BOOL _hasStoppedFetching;
    BOOL _userStoppedFetching;
    BOOL _isRetryEnabled;
    NSTimer *_retryTimer;
    unsigned long long _retryCount;
    double _maxRetryInterval;
    double _minRetryInterval;
    double _lastRetryInterval;
    NSDate *_initialRequestDate;
    BOOL _hasAttemptedAuthRefresh;
}

@property (readonly) GTMSessionUploadFetcher *parentUploadFetcher;
@property (retain) NSData *downloadedData;
@property (retain) NSData *downloadResumeData;
@property (nonatomic) unsigned long long backgroundTaskIdentifier;
@property (getter=isUsingBackgroundSession) BOOL usingBackgroundSession;
@property (retain) NSURLRequest *request;
@property (retain) NSURLSessionConfiguration *configuration;
@property (copy) id /* block */ configurationBlock;
@property (retain) NSURLSession *session;
@property (readonly) NSURLSessionTask *sessionTask;
@property (readonly) NSString *sessionIdentifier;
@property (readonly) BOOL wasCreatedFromBackgroundSession;
@property BOOL clientWillReconnectBackgroundSession;
@property (retain) NSDictionary *sessionUserInfo;
@property (copy) NSString *taskDescription;
@property float taskPriority;
@property BOOL useBackgroundSession;
@property BOOL useUploadTask;
@property (readonly) BOOL canShareSession;
@property (copy) NSArray *allowedInsecureSchemes;
@property BOOL allowLocalhostRequest;
@property BOOL allowInvalidServerCertificates;
@property (retain) NSHTTPCookieStorage *cookieStorage;
@property (retain) NSURLCredential *credential;
@property (retain) NSURLCredential *proxyCredential;
@property (retain) NSData *bodyData;
@property (retain) NSURL *bodyFileURL;
@property (readonly) long long bodyLength;
@property (copy) id /* block */ bodyStreamProvider;
@property (retain) id<GTMFetcherAuthorizationProtocol> authorizer;
@property (retain) id<GTMSessionFetcherServiceProtocol> service;
@property (copy) NSString *serviceHost;
@property long long servicePriority;
@property (copy) id /* block */ didReceiveResponseBlock;
@property (copy) id /* block */ challengeBlock;
@property (copy) id /* block */ willRedirectBlock;
@property (copy) id /* block */ sendProgressBlock;
@property (copy) id /* block */ accumulateDataBlock;
@property (copy) id /* block */ receivedProgressBlock;
@property (copy) id /* block */ downloadProgressBlock;
@property (copy) id /* block */ willCacheURLResponseBlock;
@property (getter=isRetryEnabled) BOOL retryEnabled;
@property (copy) id /* block */ retryBlock;
@property (copy) id /* block */ metricsCollectionBlock;
@property double maxRetryInterval;
@property double minRetryInterval;
@property double retryFactor;
@property (readonly) unsigned long long retryCount;
@property (readonly) double nextRetryInterval;
@property BOOL skipBackgroundTask;
@property (readonly, getter=isFetching) BOOL fetching;
@property (copy) id /* block */ completionHandler;
@property (copy) id /* block */ resumeDataBlock;
@property (readonly) long long statusCode;
@property (readonly) NSDictionary *responseHeaders;
@property (readonly) NSURLResponse *response;
@property (readonly) long long downloadedLength;
@property (retain) NSURL *destinationFileURL;
@property (readonly) NSDate *initialBeginFetchDate;
@property (retain) id userData;
@property (copy) NSDictionary *properties;
@property (copy) NSString *comment;
@property (copy) NSString *log;
@property (retain) NSObject<OS_dispatch_queue> *callbackQueue;
@property (retain) NSOperationQueue *sessionDelegateQueue;
@property (copy) id /* block */ testBlock;
@property unsigned long long testBlockAccumulateDataChunkCount;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)fetcherWithRequest:(id)a0;
+ (void)reconnectFetchersForBackgroundSessionsOnAppLaunch:(id)a0;
+ (id)fetchersForBackgroundSessions;
+ (id)fetcherWithURL:(id)a0;
+ (id)sessionIdentifierToFetcherMap;
+ (BOOL)appAllowsInsecureRequests;
+ (id)staticCookieStorage;
+ (id)fetcherUIApplication;
+ (id)fetcherUserDefaults;
+ (id)activePersistedBackgroundSessions;
+ (id)fetcherWithSessionIdentifier:(id)a0;
+ (id)redirectURLWithOriginalRequestURL:(id)a0 redirectRequestURL:(id)a1;
+ (void)evaluateServerTrust:(struct __SecTrust { } *)a0 forRequest:(id)a1 completionHandler:(id /* block */)a2;
+ (id /* block */)systemCompletionHandlerForSessionIdentifier:(id)a0;
+ (void)setSystemCompletionHandler:(id /* block */)a0 forSessionIdentifier:(id)a1;
+ (id)fetcherWithURLString:(id)a0;
+ (id)fetcherWithDownloadResumeData:(id)a0;
+ (void)setGlobalTestBlock:(id /* block */)a0;
+ (void)setSubstituteUIApplication:(id)a0;
+ (id)substituteUIApplication;
+ (void)setLoggingEnabled:(BOOL)a0;
+ (BOOL)isLoggingEnabled;
+ (void)load;
+ (void)application:(id)a0 handleEventsForBackgroundURLSession:(id)a1 completionHandler:(id /* block */)a2;

- (void)_flex_swizzle_b79f0b55_URLSession:(id)a0 downloadTask:(id)a1 didFinishDownloadingToURL:(id)a2;
- (void)_flex_swizzle_65841fd2_URLSession:(id)a0 downloadTask:(id)a1 didWriteData:(long long)a2 totalBytesWritten:(long long)a3 totalBytesExpectedToWrite:(long long)a4;
- (void)_flex_swizzle_23d152b_URLSession:(id)a0 dataTask:(id)a1 didBecomeDownloadTask:(id)a2;
- (void)_flex_swizzle_4a3f549f_URLSession:(id)a0 task:(id)a1 didCompleteWithError:(id)a2;
- (void)_flex_swizzle_df05ec1b_URLSession:(id)a0 dataTask:(id)a1 didReceiveResponse:(id)a2 completionHandler:(id /* block */)a3;
- (void)_flex_swizzle_195cdf9b_URLSession:(id)a0 dataTask:(id)a1 didReceiveData:(id)a2;
- (void)_flex_swizzle_fae4101d_URLSession:(id)a0 task:(id)a1 willPerformHTTPRedirection:(id)a2 newRequest:(id)a3 completionHandler:(id /* block */)a4;
- (void)connection:(id)a0 didFailWithError:(id)a1;
- (void)connectionDidFinishLoading:(id)a0;
- (void)connection:(id)a0 didReceiveResponse:(id)a1;
- (void)connection:(id)a0 didReceiveData:(id)a1;
- (id)connection:(id)a0 willSendRequest:(id)a1 redirectResponse:(id)a2;
- (void)authorizeRequest;
- (void)retryFetch;
- (void)beginFetchWithCompletionHandler:(id /* block */)a0;
- (id)initWithRequest:(id)a0 configuration:(id)a1;
- (void)setCommentWithFormat:(id)a0;
- (void)forgetSessionIdentifierForFetcherWithoutSyncCheck;
- (void)beginFetchMayDelay:(BOOL)a0 mayAuthorize:(BOOL)a1 mayDecorate:(BOOL)a2;
- (id /* block */)completionHandlerWithTarget:(id)a0 didFinishSelector:(SEL)a1;
- (void)failToBeginFetchWithError:(id)a0;
- (BOOL)canFetchWithBackgroundSession;
- (void)setSessionIdentifierInternal:(id)a0;
- (void)setCanShareSession:(BOOL)a0;
- (id)createSessionIdentifierWithMetadata:(id)a0;
- (void)removePersistedBackgroundSessionFromDefaults;
- (void)setDownloadedLength:(long long)a0;
- (void)applyDecoratorsAtRequestWillStart:(id)a0 startingAtIndex:(unsigned long long)a1;
- (void)sendStopNotificationIfNeeded;
- (void)addPersistedBackgroundSessionToDefaults;
- (void)setStopNotificationNeeded:(BOOL)a0;
- (void)postNotificationOnMainThreadWithName:(id)a0 userInfo:(id)a1 requireAsync:(BOOL)a2;
- (void)simulateFetchForTestBlock;
- (void)simulateDataCallbacksForTestBlockWithBodyData:(id)a0 response:(id)a1 responseData:(id)a2 error:(id)a3;
- (void)invokeOnCallbackQueue:(id)a0 afterUserStopped:(BOOL)a1 block:(id /* block */)a2;
- (void)invokeOnCallbackQueueUnlessStopped:(id /* block */)a0;
- (void)invokeOnCallbackUnsynchronizedQueueAfterUserStopped:(BOOL)a0 block:(id /* block */)a1;
- (void)simulateByteTransferReportWithDataLength:(long long)a0 block:(id /* block */)a1;
- (void)simulateByteTransferWithData:(id)a0 block:(id /* block */)a1;
- (void)finishWithError:(id)a0 shouldRetry:(BOOL)a1;
- (void)shouldRetryNowForStatus:(long long)a0 error:(id)a1 forceAssumeRetry:(BOOL)a2 response:(id /* block */)a3;
- (void)setSystemCompletionHandler:(id /* block */)a0;
- (void)restoreDefaultStateForSessionIdentifierMetadata;
- (id)sessionIdentifierMetadataUnsynchronized;
- (id)sessionIdentifierDefaultMetadata;
- (void)invokeFetchCallbacksOnCallbackQueueWithData:(id)a0 error:(id)a1 mayDecorate:(BOOL)a2 shouldReleaseCallbacks:(BOOL)a3;
- (void)authorizer:(id)a0 request:(id)a1 finishedWithError:(id)a2;
- (void)updateMutableRequest:(id)a0;
- (void)applyDecoratorsAtRequestDidFinish:(id)a0 withData:(id)a1 error:(id)a2 startingAtIndex:(unsigned long long)a3 shouldReleaseCallbacks:(BOOL)a4;
- (BOOL)isFetchingUnsynchronized;
- (id)responseUnsynchronized;
- (long long)statusCodeUnsynchronized;
- (void)stopFetchReleasingCallbacks:(BOOL)a0;
- (void)destroyRetryTimer;
- (id /* block */)systemCompletionHandler;
- (void)forgetSessionIdentifierForFetcher;
- (void)beginFetchForRetry;
- (BOOL)userStoppedFetching;
- (void)logNowWithError:(id)a0;
- (void)invokeOnCallbackQueueAfterUserStopped:(BOOL)a0 block:(id /* block */)a1;
- (void)respondToChallenge:(id)a0 completionHandler:(id /* block */)a1;
- (id)sessionNeedingInvalidation;
- (void)setSessionNeedingInvalidation:(id)a0;
- (id)responseHeadersUnsynchronized;
- (void)beginRetryTimer;
- (BOOL)shouldReleaseCallbacksUponCompletion;
- (void)updateRequestValue:(id)a0 forHTTPHeaderField:(id)a1;
- (BOOL)isRetryEnabledUnsynchronized;
- (BOOL)hasRetryAfterInterval;
- (double)nextRetryIntervalUnsynchronized;
- (BOOL)isRetryError:(id)a0;
- (void)retryTimerFired:(id)a0;
- (double)retryAfterInterval;
- (void)beginFetchWithDelegate:(id)a0 didFinishSelector:(SEL)a1;
- (id)sessionIdentifierMetadata;
- (id)mutableRequestForTesting;
- (void)setRequestValue:(id)a0 forHTTPHeaderField:(id)a1;
- (void)addPropertiesFromDictionary:(id)a0;
- (id)retryTimer;
- (void)setProperty:(id)a0 forKey:(id)a1;
- (void)URLSession:(id)a0 downloadTask:(id)a1 didResumeAtOffset:(long long)a2 expectedTotalBytes:(long long)a3;
- (void)URLSession:(id)a0 dataTask:(id)a1 willCacheResponse:(id)a2 completionHandler:(id /* block */)a3;
- (void).cxx_destruct;
- (id)initWithRequest:(id)a0;
- (void)setResponse:(id)a0;
- (void)URLSession:(id)a0 task:(id)a1 needNewBodyStream:(id /* block */)a2;
- (void)URLSession:(id)a0 task:(id)a1 willPerformHTTPRedirection:(id)a2 newRequest:(id)a3 completionHandler:(id /* block */)a4;
- (id)propertyForKey:(id)a0;
- (void)URLSession:(id)a0 dataTask:(id)a1 didReceiveResponse:(id)a2 completionHandler:(id /* block */)a3;
- (void)URLSession:(id)a0 didBecomeInvalidWithError:(id)a1;
- (void)URLSession:(id)a0 task:(id)a1 didReceiveChallenge:(id)a2 completionHandler:(id /* block */)a3;
- (id)init;
- (void)URLSession:(id)a0 dataTask:(id)a1 didReceiveData:(id)a2;
- (void)URLSession:(id)a0 downloadTask:(id)a1 didWriteData:(long long)a2 totalBytesWritten:(long long)a3 totalBytesExpectedToWrite:(long long)a4;
- (void)URLSession:(id)a0 task:(id)a1 didSendBodyData:(long long)a2 totalBytesSent:(long long)a3 totalBytesExpectedToSend:(long long)a4;
- (void)URLSession:(id)a0 task:(id)a1 didFinishCollectingMetrics:(id)a2;
- (void)setSessionIdentifier:(id)a0;
- (void)URLSession:(id)a0 dataTask:(id)a1 didBecomeDownloadTask:(id)a2;
- (void)URLSessionDidFinishEventsForBackgroundURLSession:(id)a0;
- (void)URLSession:(id)a0 downloadTask:(id)a1 didFinishDownloadingToURL:(id)a2;
- (void)dealloc;
- (id)copyWithZone:(struct _NSZone { } *)a0;
- (void)URLSession:(id)a0 task:(id)a1 didCompleteWithError:(id)a2;
- (void)endBackgroundTask;
- (void)setSessionTask:(id)a0;
- (BOOL)waitForCompletionWithTimeout:(double)a0;
- (void)releaseCallbacks;
- (void)stopFetching;

@end
