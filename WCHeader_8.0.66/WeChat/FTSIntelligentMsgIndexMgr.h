@class FTSIntelligentMsgIndexState, NSString, NSRecursiveLock, FTSIntelligentMessageDB, NSMutableDictionary, NSOperationQueue, NSMutableSet, NSMutableArray;

@interface FTSIntelligentMsgIndexMgr : FTSIndexMgr <IMsgExt, WXGImportMessageNotification, IFTSIntelligentMessageExt, IDownloadImageExt> {
    NSRecursiveLock *_lock;
    NSRecursiveLock *_insertDbLock;
    unsigned int _unIndexNewMsgCount;
    NSMutableDictionary *_dicUnIndexMsgCache;
    NSMutableDictionary *_dicSessionMaxId;
    BOOL _hasDeleteTask;
    NSMutableSet *_newMsgIndexSessions;
    NSMutableSet *_oldMsgIndexSessions;
    FTSIntelligentMsgIndexState *_indexingState;
    NSOperationQueue *m_priorityBulidQueue;
}

@property (retain) NSMutableSet *indexRepairingUsrs;
@property (retain) NSString *m_priorityBulidUserName;
@property (retain) NSMutableArray *m_arrAppCpuUsage;
@property double m_sleepSec;
@property double m_appLaunchTime;
@property (retain) NSMutableDictionary *m_dicUnHadDownLoadMsgCache;
@property BOOL m_isSkipOverCheckAppCpuUsage;
@property (nonatomic) BOOL isInitingIndex;
@property BOOL m_isPauseInBackground;
@property BOOL m_isHadreleaseInPauseBackground;
@property (retain, nonatomic) FTSIntelligentMessageDB *ftsIntelligentMessageDB;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

- (id)initWithFTSDB:(id)a0;
- (BOOL)isValidAccount;
- (void)makeSureInitIndexing;
- (void)asyncInitIndex;
- (void)doInitIndexing;
- (void)doInitMsgSourceState;
- (id)getAllNeedBuildIndexSessionUserNameAr;
- (void)resetIndexState;
- (BOOL)needIndexNewMsgFirst;
- (BOOL)hasNewIndexTask;
- (BOOL)canDoIndexing;
- (BOOL)shouldCancelIndexing;
- (void)updateIndexStatus:(id)a0 withLocalId:(unsigned int)a1;
- (void)clearIndexStatus:(id)a0;
- (id)captureOrUpdateIndexStatus;
- (void)checkIndexInvalid:(id)a0;
- (BOOL)checkCanDoIntelligent;
- (BOOL)checkCanDoIntelligentInRAM;
- (BOOL)checkIsCongestionWithCpuUsage:(double)a0 andTotalMemory:(unsigned long long)a1 andUserMemory:(unsigned long long)a2;
- (double)getCongestionSleepSec;
- (void)iFTSIndexingInit;
- (void)iFTSIndexingPrepareSearch;
- (void)iFTSIndexingFireTask:(int)a0;
- (void)iFTSIndexingStop;
- (void)iFTSIndexingMemoryWarning;
- (void)iFTSClearIndex;
- (int)iFTSIndexingCount;
- (void)iFTSIndexingPauseBackground;
- (void)iFTSIndexingResumeBackground;
- (void)cacheUnIndexMsg:(id)a0 forKey:(id)a1;
- (unsigned int)calAllMemMsgCount;
- (void)removeUnIndexMsgFromID:(unsigned int)a0 toID:(unsigned int)a1 forKey:(id)a2;
- (void)clearIndexMemCache;
- (id)safeCopyUnIndexMsgCache;
- (void)OnAddMsg:(id)a0 MsgWrap:(id)a1;
- (void)OnModMsg:(id)a0 MsgWrap:(id)a1;
- (void)handelNewHadDownLoadImageMsg:(id)a0 MsgWrap:(id)a1;
- (void)OnDelMsg:(id)a0 MsgWrap:(id)a1;
- (void)OnRevokeMsg:(id)a0 MsgWrap:(id)a1 ResultCode:(unsigned int)a2 ResultMsg:(id)a3 EducationMsg:(id)a4;
- (void)handelDelOrRevokeMsg:(id)a0 MsgWrap:(id)a1 isDeleteAction:(BOOL)a2;
- (void)OnDelMsg:(id)a0 DelAll:(BOOL)a1;
- (void)OnDownloadImageOk:(id)a0;
- (void)fireIntelligentMsgIndexingTaskLoop;
- (void)releaseInternalMemoryInPauseInBackground;
- (void)internalBuildIndexForNewMsg;
- (void)internalBuildIndexForOldMsg;
- (void)internalBuildIndexForHadDownloadInValidMsg;
- (void)internalDeleteExpiredIndex;
- (id)getBatchAddMessage:(BOOL)a0 finishSessions:(id)a1;
- (BOOL)isSessionUsrValid:(id)a0 contact:(id)a1;
- (BOOL)updateToDeleteIntelligentLocalIds:(id)a0 usr:(id)a1;
- (BOOL)batchInsertIntelligentHadDownloadInValidMsgToFTSTableWithlimitUsrname:(id)a0 limit:(int)a1 rowidIndexResult:(id)a2;
- (BOOL)batchInsertMsgToFTSTable:(id)a0;
- (BOOL)batchInsertIntelligentHadDownloadInValidMsgToFTSTable:(id)a0 rowidIndexResult:(id)a1;
- (void)priorityBuildIndexMsgWithUserName:(id)a0;
- (void)priorityBatchBuildIndexMsgWithUserName:(id)a0;
- (void)buildIndexForHadDownloadInValidMsgWithUserName:(id)a0;
- (void)cancelPriorityBuildIndexMsgWithUserName:(id)a0;
- (BOOL)checkPriorityHadFinishOperate:(id)a0;
- (BOOL)checkPriorityImageMessageHadBuildIndex:(id)a0;
- (BOOL)checkPriorityImageMessageHadBuildIndexCore:(id)a0;
- (BOOL)checkAllImageMessageHadBuildIndex:(id)a0;
- (BOOL)checkAllImageMessageHadBuildIndexCore:(id)a0;
- (void)onFTSIntelligentMessageDBWillRepairIndexForUsername:(id)a0;
- (void)onFTSIntelligentMessageDBDidRepairIndexForUsername:(id)a0 result:(BOOL)a1;
- (void).cxx_destruct;

@end
