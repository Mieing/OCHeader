@class MJMovieComposingAssetsClassifyHelper, MJPublisherContext, OMJAspectRatio, UBArraySignal, NSMutableArray, OMJMaterialManager, NSString, UIImage, OMJImageSession, MJHandleBoxContext, OMJPublisherSessionMetrics, NSArray, NSMutableDictionary, MJImageLayerViewModel, OMJImageScene, RecommendedMusicInfo, UBStringSignal, NSData, FinderMusicReportInfo, MJImageTemplateItem, MJLocationItem, MMBGMSelectedMusicResult, UBDictionarySignal, MJImageSession, WCFinderLRUCache, NSMapTable;

@interface MJImageComposingViewModel : NSObject <OMJImageSessionDelegate, WCFinderCacheDelegate>

@property (retain, nonatomic) OMJImageScene *currentScene;
@property (retain, nonatomic) NSArray *scenes;
@property (retain, nonatomic) OMJMaterialManager *materialManager;
@property (retain, nonatomic) MJImageLayerViewModel *focusLayer;
@property (retain, nonatomic) MJHandleBoxContext *handleBoxContext;
@property (retain, nonatomic) NSArray *templateItems;
@property (retain, nonatomic) MJImageTemplateItem *currentTemplateItem;
@property (retain, nonatomic) NSString *lastTemplateID;
@property (retain, nonatomic) NSMapTable *initialScaleFactorsByLayerID;
@property (retain, nonatomic) NSMapTable *thumbnailsByID;
@property (retain, nonatomic) NSMapTable *snapshotFilePathsByID;
@property (retain, nonatomic) WCFinderLRUCache *snapshotsByID;
@property (retain, nonatomic) NSMutableDictionary *livePhotoConfigsByID;
@property (readonly, nonatomic) BOOL isLivePhotoEnabled;
@property (retain, nonatomic) NSString *lastLoadingMaterialID;
@property (nonatomic) struct MJImageRequestContext { BOOL isRunning; NSMutableArray *completionHandlers; } templateRequestContext;
@property (nonatomic) struct map<MJMaterialScene, std::shared_ptr<MJImageRequestContext>, std::less<MJMaterialScene>, std::allocator<std::pair<const MJMaterialScene, std::shared_ptr<MJImageRequestContext>>>> { struct __tree<std::__value_type<MJMaterialScene, std::shared_ptr<MJImageRequestContext>>, std::__map_value_compare<MJMaterialScene, std::__value_type<MJMaterialScene, std::shared_ptr<MJImageRequestContext>>, std::less<MJMaterialScene>>, std::allocator<std::__value_type<MJMaterialScene, std::shared_ptr<MJImageRequestContext>>>> { void *__begin_node_; struct __compressed_pair<std::__tree_end_node<std::__tree_node_base<void *> *>, std::allocator<std::__tree_node<std::__value_type<MJMaterialScene, std::shared_ptr<MJImageRequestContext>>, void *>>> { struct __tree_end_node<std::__tree_node_base<void *> *> { void *__left_; } __value_; } __pair1_; struct __compressed_pair<unsigned long, std::__map_value_compare<MJMaterialScene, std::__value_type<MJMaterialScene, std::shared_ptr<MJImageRequestContext>>, std::less<MJMaterialScene>>> { unsigned long long __value_; } __pair3_; } __tree_; } materialRequestContextsByScene;
@property (nonatomic) struct map<MJMaterialScene, NSArray<MJImageMaterialItem *> *, std::less<MJMaterialScene>, std::allocator<std::pair<const MJMaterialScene, NSArray<MJImageMaterialItem *> *>>> { struct __tree<std::__value_type<MJMaterialScene, NSArray<MJImageMaterialItem *> *>, std::__map_value_compare<MJMaterialScene, std::__value_type<MJMaterialScene, NSArray<MJImageMaterialItem *> *>, std::less<MJMaterialScene>>, std::allocator<std::__value_type<MJMaterialScene, NSArray<MJImageMaterialItem *> *>>> { void *__begin_node_; struct __compressed_pair<std::__tree_end_node<std::__tree_node_base<void *> *>, std::allocator<std::__tree_node<std::__value_type<MJMaterialScene, NSArray<MJImageMaterialItem *> *>, void *>>> { struct __tree_end_node<std::__tree_node_base<void *> *> { void *__left_; } __value_; } __pair1_; struct __compressed_pair<unsigned long, std::__map_value_compare<MJMaterialScene, std::__value_type<MJMaterialScene, NSArray<MJImageMaterialItem *> *>, std::less<MJMaterialScene>>> { unsigned long long __value_; } __pair3_; } __tree_; } materialItemsByScene;
@property (retain, nonatomic) NSMapTable *locationItemsByID;
@property (retain, nonatomic) MJLocationItem *userLocationItem;
@property (readonly, nonatomic) OMJImageSession *backingSession;
@property (readonly, nonatomic) NSArray *originalAssetInfos;
@property (readonly, nonatomic) unsigned long long exportImageType;
@property (readonly, nonatomic) NSString *exportDirectoryPath;
@property (readonly, nonatomic) NSString *snapshotDirectoryPath;
@property (readonly, nonatomic) UIImage *currentImageFrame;
@property (readonly, nonatomic) MJImageSession *session;
@property (readonly, nonatomic) NSArray *textItems;
@property (readonly, nonatomic) NSArray *whenWhereItems;
@property (readonly, nonatomic) OMJAspectRatio *currentSceneAspectRatio;
@property (copy, nonatomic) id /* block */ thumbnailDidUpdateHandler;
@property (copy, nonatomic) id /* block */ snapshotDidUpdateHandler;
@property (readonly, nonatomic) UBArraySignal *sceneDidAddSignal;
@property (readonly, nonatomic) UBDictionarySignal *sceneDidRemoveSignal;
@property (readonly, nonatomic) UBDictionarySignal *sceneDidMoveSignal;
@property (readonly, nonatomic) UBStringSignal *sceneDidSwitchSignal;
@property (copy, nonatomic) id /* block */ handleBoxSettingsDidChangeFunc;
@property (readonly, nonatomic) BOOL isHandleBoxEnabled;
@property (retain, nonatomic) MJMovieComposingAssetsClassifyHelper *assetClassifyHelper;
@property (retain, nonatomic) NSData *assetClassifyResult;
@property (retain, nonatomic) OMJPublisherSessionMetrics *publisherSessionMetrics;
@property (retain, nonatomic) MJPublisherContext *publisherContext;
@property (retain, nonatomic) MMBGMSelectedMusicResult *appliedMusicInfo;
@property (retain, nonatomic) FinderMusicReportInfo *editMusicReportInfo;
@property (retain, nonatomic) RecommendedMusicInfo *patMusicInfo;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

- (void)startExportingWithProgressHandler:(id /* block */)a0 completionHandler:(id /* block */)a1;
- (id)initWithSession:(id)a0 assetInfos:(id)a1;
- (void)dealloc;
- (void)startupWithRenderView:(id)a0 maskStyle:(id)a1 completionHandler:(id /* block */)a2;
- (void)commitUpdate;
- (void)commitUpdateAndSkipTriggerRefresh;
- (void)commitUpdateAndThumbnail;
- (void)commitUpdateAndThumbnailAndSkipTriggerRefresh;
- (void)forceUpdateThumbnail;
- (void)imageSession:(id)a0 didUpdateThumbnail:(id)a1 forScene:(id)a2;
- (BOOL)switchToScene:(id)a0;
- (BOOL)_switchToScene:(id)a0;
- (id)thumbnailForSceneWithID:(id)a0;
- (void)addScenesWithAssetInfos:(id)a0 completionHandler:(id /* block */)a1;
- (void)_addScenesWithAssetInfos:(id)a0 completionHandler:(id /* block */)a1;
- (BOOL)moveSceneAtIndex:(long long)a0 toIndex:(long long)a1;
- (BOOL)_moveSceneAtIndex:(long long)a0 toIndex:(long long)a1;
- (id)sceneWithID:(id)a0;
- (BOOL)removeSceneWithID:(id)a0 switchToSceneWithID:(id)a1;
- (id)snapshotForSceneWithID:(id)a0;
- (void)updateSnapshot:(id)a0 forSceneWithID:(id)a1;
- (void)_loadNeighbouringSnapshots;
- (void)_handleSnapshotCompletionWithSceneID:(id)a0 path:(id)a1 error:(id)a2;
- (void)requestTemplateItemsWithCompletionHandler:(id /* block */)a0;
- (void)_handleFetchTemplatesFinishWithError:(id)a0;
- (void)switchToTemplateWithID:(id)a0 progressHandler:(id /* block */)a1;
- (BOOL)isEditingText;
- (void)requestTextItemsWithCompletionHandler:(id /* block */)a0;
- (void)addTextLayerWithItem:(id)a0 completionHandler:(id /* block */)a1;
- (void)updateFocusLayerWithItem:(id)a0 completionHandler:(id /* block */)a1;
- (void)requestWhenWhereItemsWithCompletionHandler:(id /* block */)a0;
- (void)addWhenWhereLayerWithItem:(id)a0 completionHandler:(id /* block */)a1;
- (BOOL)addEmoticonLayerWithFilePath:(id)a0 size:(struct CGSize { double x0; double x1; })a1 decoderType:(unsigned long long)a2 timingFillMode:(unsigned long long)a3;
- (void)focusOnLayer:(id)a0;
- (void)focusOnLayer:(id)a0 withOptions:(unsigned long long)a1;
- (void)resignFocus;
- (BOOL)removeLayerWithID:(id)a0;
- (double)initialScaleFactorForLayerWithID:(id)a0;
- (id)layerVMWithID:(id)a0;
- (void)requestMaterialWithID:(id)a0 progressHandler:(id /* block */)a1 completionHandler:(id /* block */)a2;
- (void)requestItemsWithMaterialScene:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)_handleRequestFinishWithMaterialScene:(unsigned long long)a0 categories:(id)a1 error:(id)a2;
- (void)_loadAndApplyMaterialWithItem:(id)a0 operation:(id /* block */)a1 completionHandler:(id /* block */)a2;
- (id)locationItemForScene:(id)a0;
- (void)requestLocationItemForScene:(id)a0 completionHandler:(id /* block */)a1;
- (struct CGPoint { double x0; double x1; })calcViewPointForHandleBoxPoint:(struct CGPoint { double x0; double x1; })a0;
- (id)layerIDAtLocation:(struct CGPoint { double x0; double x1; })a0 hitTestInsets:(struct UIEdgeInsets { double x0; double x1; double x2; double x3; })a1;
- (void)showHandleBoxForLayer:(id)a0 items:(id)a1 titles:(id)a2 edgeInsets:(struct UIEdgeInsets { double x0; double x1; double x2; double x3; })a3 borderStyle:(id)a4;
- (void)removeHandleBox;
- (id)templateItemWithID:(id)a0;
- (void)toggleLivePhotoForScene:(id)a0;
- (id)livePhotoConfigForScene:(id)a0;
- (BOOL)_shouldPlayLivePhoto;
- (void)_playLivePhotoIfNeeded;
- (void)startPlaying;
- (void)stopPlayingWithShouldSkipTriggerRefresh:(BOOL)a0;
- (void)stopPlayingWithShouldSkipTriggerRefresh:(BOOL)a0 completionHandler:(id /* block */)a1;
- (BOOL)isCurrentSceneIsUsingAsLivePhoto;
- (void)stopPlayingLivePhotoWithShouldSkipTriggerRefresh:(BOOL)a0;
- (void)cache:(id)a0 didEvictObject:(id)a1;
- (id)itemsWithMaterialScene:(unsigned long long)a0;
- (struct shared_ptr<MJImageRequestContext> { struct MJImageRequestContext *x0; struct __shared_weak_count *x1; })requestContextWithMaterialScene:(unsigned long long)a0;
- (id)filterSameAssetInfo:(id)a0;
- (id)mjAssetInfoWithMM:(id)a0;
- (id)genReportDict;
- (void).cxx_destruct;
- (id).cxx_construct;

@end
