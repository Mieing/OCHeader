@class NSDictionary, MMNetworkMonitor, NSThread, MMAppRunningInfo, MMGPUMonitorConfig, MMLocationMonitorConfig, MMGPUMonitor, NSMutableArray, MMAudioMonitor, NSString, AVCaptureDevice, MMNetworkMonitorConfig, MMAudioMonitorConfig, NSArray, NSMutableDictionary, NSRecursiveLock, MMStackReportConnection, MMCPUTimeProfilerConfig, MMMetricsMonitorConfig, MMMetricsDB, MMMetricsInfo, MMLocationMonitor, MMCPUTimeProfiler;

@interface MMMetricsMonitor : MMRootService <MMKernelExt, IExptServiceExt, MMStackReportConnectionDelegate, MMServiceProtocol> {
    MMAppRunningInfo *m_runningInfo;
    unsigned int m_checkCountMax;
    unsigned int m_checkCountDefault;
    unsigned int m_monitorTicks;
    unsigned int m_deviceNetworkUsageTicks;
    NSMutableArray *m_metricsInfos;
    NSMutableArray *m_metricsInfosToInsert;
    NSArray *m_threadInfos;
    NSMutableArray *m_threadInfosToInsert;
    NSMutableArray *m_businessDatasToInsert;
    MMMetricsInfo *m_lastMetricsInfo;
    MMMetricsInfo *m_lastRunMetricsInfo;
    MMMetricsInfo *m_firstMetricsInfoForMemoryRising;
    MMMetricsInfo *m_lastMetricsInfoForMemoryRising;
    unsigned long long m_memoryPressureFlag;
    unsigned long long m_memoryPressureFlagForReport;
    unsigned long long m_userType;
    unsigned long long m_maxUserType;
    NSDictionary *m_baseInfo;
    NSMutableDictionary *m_customInfo;
    NSMutableDictionary *m_customInfoForUser;
    NSRecursiveLock *m_dataLock;
    NSRecursiveLock *m_dbLock;
    AVCaptureDevice *m_backCaptureDevice;
    long long m_applicationState;
    MMCPUTimeProfiler *m_cpuTimeProfiler;
    MMGPUMonitor *m_gpuMonitor;
    MMLocationMonitor *m_locationMonitor;
    MMNetworkMonitor *m_networkMonitor;
    MMAudioMonitor *m_audioMonitor;
    NSThread *m_workingThread;
    NSString *m_metricsDataPath;
    NSString *m_configPath;
    MMMetricsDB *m_metricsDB;
    MMMetricsMonitorConfig *m_config;
    MMCPUTimeProfilerConfig *m_cpuTimeProfilerConfig;
    MMGPUMonitorConfig *m_gpuMonitorConfig;
    MMLocationMonitorConfig *m_locationMonitorConfig;
    MMNetworkMonitorConfig *m_networkMonitorConfig;
    MMAudioMonitorConfig *m_audioMonitorConfig;
    BOOL m_shouldSaveDyldImage;
    BOOL m_isUploadingFullData;
    MMStackReportConnection *m_reportConnection;
    struct shared_ptr<MMMetricsUploadFileObserver> { struct MMMetricsUploadFileObserver *__ptr_; struct __shared_weak_count *__cntrl_; } m_uploadFileObserver;
}

@property (retain) NSString *scene;
@property (retain) NSString *weAppScene;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

- (void)onServiceInit;
- (void)prepareInMain;
- (void)prepareMonitoring;
- (void)initPaths;
- (void)initOverheatingDetector;
- (void)initMonitors;
- (void)initMetricsDB;
- (void)onServiceTerminate;
- (void)clearData;
- (void)clearDataDelay;
- (unsigned long long)preGetMetricDataSize;
- (unsigned long long)cleanMetricData;
- (void)addBusinessData:(unsigned long long)a0 content:(id)a1;
- (void)startMonitoring;
- (void)stopMonitoring;
- (BOOL)autoStackReport;
- (void)addUserType:(unsigned long long)a0;
- (void)removeUserType:(unsigned long long)a0;
- (void)setCustomInfoWithKey:(id)a0 value:(id)a1;
- (void)setCustomInfo:(id)a0 forUserType:(unsigned long long)a1;
- (id)getCustomInfoForUserType:(unsigned long long)a0;
- (id)defaultEventConfig;
- (void)setEventConfig:(id)a0 forUserType:(unsigned long long)a1;
- (void)metricsMonitorThread;
- (void)collectData;
- (void)saveData;
- (void)reportKVData;
- (void)reportEventData;
- (id)customInfoForUser:(unsigned long long)a0;
- (id)reportHeadDictForCriticalEvent:(id)a0;
- (id)reportHeadDictForCommonEvent:(unsigned long long)a0 metricsInfo:(id)a1 customInfo:(id)a2;
- (void)uploadMetricsDBFrom:(double)a0 to:(double)a1;
- (void)reportFullDataFrom:(double)a0 to:(double)a1;
- (void)onReportFullDataFinished;
- (void)uploadMetricsDataFrom:(double)a0 to:(double)a1 eventTag:(unsigned long long)a2 eventSubTag:(unsigned long long)a3 customInfo:(id)a4;
- (void)uploadCPUDataFrom:(double)a0 to:(double)a1 eventTag:(unsigned long long)a2 eventSubTag:(unsigned long long)a3 customInfo:(id)a4;
- (id)currUsrName;
- (id)lastMetricsInfo;
- (id)lastRunMetricsInfo;
- (id)genMetricsInfo;
- (id)genMetricsInfoInternal:(BOOL)a0;
- (id)collectMetricsInfoWithNotify:(BOOL)a0 customizeBlock:(id /* block */)a1;
- (void)checkMetricsInfoForMemoryRising:(id)a0;
- (void)checkMetricsInfoForDeviceNetworkUsage;
- (unsigned int)checkCountByDuration:(unsigned int)a0;
- (id)getMetricsInfosFrom:(double)a0 to:(double)a1;
- (void)deviceMayBecomeOverheating:(id)a0;
- (void)deviceMayResignOverheating:(id)a0;
- (void)loadMonitorConfig;
- (void)saveMonitorConfig;
- (void)onAuthOK;
- (void)onExptItemListChange;
- (void)setupStrategyFromXLab;
- (void)onDyldImageChanged;
- (id)imageInfosToSave;
- (void)onStackReportCompleted:(BOOL)a0;
- (void).cxx_destruct;
- (id).cxx_construct;

@end
