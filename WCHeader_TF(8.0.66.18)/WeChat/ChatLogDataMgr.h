@class NSString, NSRecursiveLock, ChatLogMiddleImageCache, NSMutableDictionary, NSOperationQueue, ChatLogDataStat, NSMutableArray, NSObject;
@protocol OS_dispatch_queue;

@interface ChatLogDataMgr : MMUserService <MMServiceProtocol> {
    NSMutableArray *_arrSessionInfo;
    unsigned long long _startLoadDataTime;
    unsigned int _loadDataCostTime;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrSessionItems;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrImageSessionItems;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrVideoSessionItems;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrFileSessionItems;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrFilterSessionItems;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrFilterImgSessionItems;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrFilterVideoSessionItems;
    struct vector<std::shared_ptr<ChatLogSessionItem>, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__begin_; void *__end_; struct __compressed_pair<std::shared_ptr<ChatLogSessionItem> *, std::allocator<std::shared_ptr<ChatLogSessionItem>>> { void *__value_; } __end_cap_; } _arrFilterFileSessionItems;
    NSObject<OS_dispatch_queue> *_removeFileQueue;
    BOOL _loadingData;
    BOOL _loadDataEnd;
    unsigned long long _oneMsgSize;
}

@property (nonatomic) BOOL filteringData;
@property (nonatomic) BOOL filterDataEnd;
@property (nonatomic) unsigned int msgOldestTime;
@property (nonatomic) unsigned int msgNewestTime;
@property (retain, nonatomic) NSRecursiveLock *detailRecurciveLock;
@property (retain, nonatomic) ChatLogDataStat *stat;
@property (copy, nonatomic) id /* block */ chatLogCalCompletion;
@property (copy, nonatomic) id /* block */ chatLogFilterCalCompletion;
@property (retain, nonatomic) NSMutableDictionary *reportSavedMediaDict;
@property (retain, nonatomic) NSMutableDictionary *reportSendedMediaDict;
@property (nonatomic) unsigned int sessionDetailQueueThreadCount;
@property (retain, nonatomic) ChatLogMiddleImageCache *chatLogMiddleImageCache;
@property (retain, nonatomic) NSString *usrDir;
@property (nonatomic) BOOL noCacheEnabled;
@property (nonatomic) BOOL slimPathEnabled;
@property (nonatomic) unsigned long long allSessionSize;
@property (nonatomic) unsigned long long allOtherFileSize;
@property (nonatomic) unsigned long long allMsgSize;
@property (nonatomic) unsigned long long allMessageCount;
@property (nonatomic) unsigned long long allThumbFileSize;
@property (nonatomic) unsigned long long allThumbFileCount;
@property (nonatomic) unsigned long long allAudioSize;
@property (nonatomic) unsigned long long allAudioCount;
@property (nonatomic) unsigned long long allImgThumbSize;
@property (nonatomic) unsigned long long allImgThumbCount;
@property (nonatomic) unsigned long long allAppThumbSize;
@property (nonatomic) unsigned long long allAppThumbCount;
@property (nonatomic) unsigned long long allVideoThumbSize;
@property (nonatomic) unsigned long long allVideoThumbCount;
@property (nonatomic) unsigned long long allRawImageSize;
@property (nonatomic) unsigned long long allRawImageCount;
@property (nonatomic) unsigned long long allRawVideoSize;
@property (nonatomic) unsigned long long allRawVideoCount;
@property (nonatomic) unsigned long long perMsgSize;
@property (nonatomic) struct map<unsigned int, unsigned long long, std::less<unsigned int>, std::allocator<std::pair<const unsigned int, unsigned long long>>> { struct __tree<std::__value_type<unsigned int, unsigned long long>, std::__map_value_compare<unsigned int, std::__value_type<unsigned int, unsigned long long>, std::less<unsigned int>>, std::allocator<std::__value_type<unsigned int, unsigned long long>>> { void *__begin_node_; struct __compressed_pair<std::__tree_end_node<std::__tree_node_base<void *> *>, std::allocator<std::__tree_node<std::__value_type<unsigned int, unsigned long long>, void *>>> { struct __tree_end_node<std::__tree_node_base<void *> *> { void *__left_; } __value_; } __pair1_; struct __compressed_pair<unsigned long, std::__map_value_compare<unsigned int, std::__value_type<unsigned int, unsigned long long>, std::less<unsigned int>>> { unsigned long long __value_; } __pair3_; } __tree_; } sizeOfFileType;
@property (nonatomic) unsigned long long allVideoCount;
@property (nonatomic) unsigned long long allFileCount;
@property (nonatomic) unsigned long long allImageCount;
@property (nonatomic) unsigned long long allRecordCount;
@property (retain, nonatomic) NSMutableArray *arrBrandSessionInfo;
@property (nonatomic) BOOL bGetProgress;
@property (nonatomic) BOOL bGetDetailOfAggregationMsg;
@property (nonatomic) BOOL bAnalyseMiddleImage;
@property (nonatomic) BOOL bIgnoreHardLink;
@property (nonatomic) BOOL bUseMultiThreadOpt;
@property (nonatomic) BOOL bLowPerformance;
@property (retain, nonatomic) NSOperationQueue *detailSessionQueue;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)getSessionNickName:(id)a0;
+ (BOOL)isTmpFile:(id)a0;
+ (BOOL)isAppRecordMsg:(id)a0;
+ (BOOL)isCanAddToFileItems:(struct shared_ptr<ChatLogDataItem> { struct ChatLogDataItem *x0; struct __shared_weak_count *x1; })a0;
+ (void)calculateTrueCount:(void *)a0 retCount:(unsigned long long *)a1 retSize:(unsigned long long *)a2 IgnoreHardLink:(BOOL)a3;
+ (void)recalculateHardlinkSizeForSessionItem:(void *)a0 IgnoreHardLink:(BOOL)a1;
+ (id)convertSessionItemMsgSize:(const void *)a0;
+ (id)convertSessionItemOtherSize:(const void *)a0;
+ (id)convertSessionItem:(const void *)a0;
+ (void)setAppRecordFirstOpen;
+ (BOOL)isAppRecordFirstOpen;
+ (id)getRelatedMemoryKV;

- (id)init;
- (void)dealloc;
- (id)getSessionDetailQueue;
- (void)startLoadData;
- (void)startLoadDataWithUsernames:(id)a0;
- (void)startLoadDataWithUsernamesInternal:(id)a0;
- (void)stopLoadData;
- (unsigned int)getLoadDataCostTime;
- (BOOL)isDataLoadEnd;
- (BOOL)isFilteringData;
- (BOOL)isAlreadyStartLoadData;
- (id)getSessionName:(id)a0;
- (unsigned int)parseMesLocalIdFromPath:(id)a0;
- (void)setChatLogData:(int)a0 msgType:(int)a1 withFilePath:(id)a2 withLocalID:(unsigned int)a3 dataItem:(void *)a4 sessionItem:(void *)a5 sessionPart:(id)a6;
- (void)resetChatLogData:(int)a0 msgType:(int)a1 withFilePath:(id)a2 withLocalID:(unsigned int)a3 dataItem:(void *)a4 sessionItem:(void *)a5;
- (void)getRecordMsgInnerFileInfo:(id)a0 localID:(unsigned int)a1 forFiles:(id)a2 inSessionItem:(void *)a3 innerIndex:(id)a4 sessionPart:(id)a5;
- (void)setChatLogRecordDataForFolder:(id)a0 sessionItem:(void *)a1 sessionPart:(id)a2;
- (void)getFileSizeAndTimeForDataItem:(void *)a0 with:(id)a1 with:(unsigned long long)a2;
- (void)getDetailForDataItem:(void *)a0;
- (void)analyseResDir:(id)a0 dataType:(int)a1 msgType:(int)a2 sessionItem:(void *)a3 sessionPart:(id)a4;
- (void)analyseMiddleMediaInfo:(void *)a0;
- (void)analyseRawMediaInfo:(void *)a0 progress:(unsigned long long *)a1 totalProgress:(unsigned long long)a2;
- (void)analyseReportOneMedia:(struct shared_ptr<ChatLogDataItem> { struct ChatLogDataItem *x0; struct __shared_weak_count *x1; })a0 messageWrap:(id)a1;
- (id)getCacheKeyFromFullPath:(id)a0 sessionPart:(id)a1;
- (id)expandFullPathFromCacheKey:(const void *)a0;
- (void)completeAfterLoadDataFinish;
- (void)onLoadDataWithDBSize:(unsigned long long)a0 usernames:(id)a1;
- (void)getDetailInfoForSessionInfo:(struct shared_ptr<ChatLogSessionItem> { struct ChatLogSessionItem *x0; struct __shared_weak_count *x1; })a0 oneMsgSize:(unsigned long long)a1;
- (unsigned long long)getCountOfSessionItem;
- (struct shared_ptr<ChatLogSessionItem> { struct ChatLogSessionItem *x0; struct __shared_weak_count *x1; })getSessionItemOfIndex:(unsigned long long)a0;
- (struct shared_ptr<ChatLogSessionItem> { struct ChatLogSessionItem *x0; struct __shared_weak_count *x1; })getSessionItemWithUserName:(id)a0 bFilter:(BOOL)a1;
- (const void *)getAllSessionItem;
- (const void *)getImageSessionItem;
- (const void *)getVideoSessionItem;
- (const void *)getFileSessionItem;
- (void)p_innerStopDownloadUploadTask:(const void *)a0;
- (void)deleteSessions:(const void *)a0 startTime:(unsigned int)a1 endTime:(unsigned int)a2;
- (void)deleteSessionDataItems:(const void *)a0 withType:(int)a1;
- (void)deleteSessionDataItems:(const void *)a0;
- (void)deleteImageItems:(const void *)a0;
- (void)deleteVideoItems:(const void *)a0;
- (void)deleteFileItems:(const void *)a0;
- (void)deleteDataItems:(const void *)a0;
- (void)p_removeDataItemInFull:(const void *)a0;
- (void)p_removeDataItemInFilter:(const void *)a0;
- (void)innerDeleteDataItem:(void *)a0;
- (const void *)getAllFilterSessionItem;
- (const void *)getFilterImageSessionItem;
- (const void *)getFilterVideoSessionItem;
- (const void *)getFilterFileSessionItem;
- (void)reloadDataStartTime:(unsigned int)a0 endTime:(unsigned int)a1;
- (void)reloadDataStartTime:(unsigned int)a0 endTime:(unsigned int)a1 source:(unsigned long long)a2 onlyInSys:(BOOL)a3;
- (BOOL)getFilterInfo:(struct shared_ptr<ChatLogSessionItem> { struct ChatLogSessionItem *x0; struct __shared_weak_count *x1; })a0 oneMsgSize:(unsigned long long)a1 startTime:(unsigned int)a2 endTime:(unsigned int)a3 backupTime:(unsigned int)a4 source:(unsigned long long)a5 onlyInSys:(BOOL)a6;
- (unsigned int)getMsgOldestTime;
- (unsigned int)getMsgNewestTime;
- (id)getAllBackupSessionItem;
- (void)asyncGetBackupChatLogSize;
- (void)asyncGetChatLogSizeOfSession:(id)a0 afterTime:(unsigned int)a1 endTime:(unsigned int)a2 backupTime:(unsigned int)a3;
- (void)asyncGetChatLogSizeOfSession:(id)a0 afterTime:(unsigned int)a1 endTime:(unsigned int)a2 backupTime:(unsigned int)a3 oneMsgSize:(unsigned long long)a4;
- (void)asyncGetChatLogSizeOfSessionByTimeStamp:(id)a0 afterTime:(unsigned int)a1 endTime:(unsigned int)a2 backupTime:(unsigned int)a3;
- (BOOL)needFullDiffByTimeStamp:(id)a0 BackupTime:(unsigned int)a1 MsgTime:(unsigned int)a2;
- (long long)GetFileSize:(id)a0;
- (struct vector<std::shared_ptr<ChatLogDataItem>, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; void *x1; struct __compressed_pair<std::shared_ptr<ChatLogDataItem> *, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; } x2; })getAllDataItems;
- (struct vector<std::shared_ptr<ChatLogDataItem>, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; void *x1; struct __compressed_pair<std::shared_ptr<ChatLogDataItem> *, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; } x2; })getAllFilterDataItems;
- (struct vector<std::shared_ptr<ChatLogDataItem>, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; void *x1; struct __compressed_pair<std::shared_ptr<ChatLogDataItem> *, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; } x2; })getAllRawSendDataItems;
- (struct vector<std::shared_ptr<ChatLogDataItem>, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; void *x1; struct __compressed_pair<std::shared_ptr<ChatLogDataItem> *, std::allocator<std::shared_ptr<ChatLogDataItem>>> { void *x0; } x2; })getAllRawReceiveItems;
- (void).cxx_destruct;
- (id).cxx_construct;

@end
